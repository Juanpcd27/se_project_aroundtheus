!function(){"use strict";class e{constructor(e,t,s){let{name:r,link:n}=e;this._name=r,this._link=n,this._cardSelector=t,this._handleImageClick=s}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_active")}_handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){return this._cardElement=this._getTemplate(),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardImageEl.src=this._link,this._cardImageEl.alt=this._name,this._cardTitleEl.textContent=this._name,this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".delete__button"),this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){this._errorMessageEl=this._form.querySelector("#"+e.id+"-error"),e.classList.add(this._inputErrorClass),this._errorMessageEl.textContent=e.validationMessage,this._errorMessageEl.classList.add(this._errorClass)}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?this.disableButton():this._enableButton()}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_hideInputError(e){this._errorMessageEl=this._form.querySelector("#"+e.id+"-error"),e.classList.remove(this._inputErrorClass),this._errorMessageEl.textContent="",this._errorMessageEl.classList.remove(this._errorClass)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_setEventListeners(){this._inputEls=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))})),this._toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),console.log(this)}disableButton(){this._submitButton&&(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0)}_enableButton(){this._submitButton&&(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}}const s={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=(document.querySelector(".page__section"),document.querySelector("#profile-edit-button")),n=document.querySelector("#profile-edt-modal"),o=document.querySelector("#profile-add-modal"),i=(n.querySelector("#modal-close-buttonone"),o.querySelector("#modal-close-buttontwo"),document.querySelector("#profile-title"),document.querySelector("#profile-description"),document.querySelector(".modal__input_type_name")),l=document.querySelector(".modal__input_type_description"),a=(o.querySelector(".modal__input-link"),document.querySelector("#save-button-opened"),n.querySelector(".modal__form")),c=o.querySelector(".modal__form"),u=document.querySelector("#modal-image-preview"),d=(u.querySelector(".modal__preview-image"),u.querySelector(".modal__title-preview"),document.querySelector(".cards__list"),document.querySelector("#card-template").content.firstElementChild,document.querySelector(".profile__add-button"));document.querySelector("#modal__close-preview");class _{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this._popupElement.querySelector(".modal__close").addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target.classList.contains("modal_opened")&&this.close()}))}}class m extends _{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}close(){super.close(),this._popupForm.reset()}_getInputValues(){const e=this._popupElement.querySelectorAll(".modal__input"),t={};return e.forEach((e=>{let{name:s,value:r}=e;t[s]=r})),t}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}}const p=new class extends _{constructor(e){super({popupSelector:e}),this._imageElement=this._popupElement.querySelector(".modal__preview-image"),this._imageTitle=this._popupElement.querySelector(".modal__title-preview")}open(e){this._imageElement.src=e.link,this._imageElement.alt=`.modal__preview-image ${e.link}`,this._imageTitle.textContent=e.name,super.open()}}("#modal-image-preview");function h(e,t){p.open({name:e,link:t})}function E(t){return new e(t,"#card-template",h).getView()}p.setEventListeners();const S=new class{constructor(e){let{name:t,description:s}=e;this._name=document.querySelector(t),this._description=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,description:this._description.textContent}}setUserInfo(e){this._name.textContent=e.name,this._description.textContent=e.description}}({name:"#profile-title",description:"#profile-description"}),g=new m("#profile-edt-modal",(e=>{S.setUserInfo({name:e.title,description:e.description})}));g.setEventListeners(),r.addEventListener("click",(()=>{f.resetValidation();const e=S.getUserInfo();i.value=e.name,l.value=e.description.trim(),g.open()}));const v=new m("#profile-add-modal",(e=>{y.addItem(E(e))}));v.setEventListeners(),d.addEventListener("click",(()=>{v.open(),w.resetValidation()}));const y=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}renderItems(e){e.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({renderer:e=>{const t=E(e);y.addItem(t)}},".cards__list");y.renderItems([{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}]);const f=new t(s,a),w=new t(s,c);w.enableValidation(),f.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eEIsQ0FFQVIsT0FBQUEsQ0FBUVMsR0FDTmxJLEtBQUs4SCxXQUFXSyxRQUFRRCxFQUMxQixHSHNDQSxDQUNFTixTQUFXSyxJQUNULE1BQU1HLEVBQWMxQixFQUFXdUIsR0FDL0JULEVBQVlDLFFBQVFXLEVBQVksR0hzQk4sZ0JHaEJoQ1osRUFBWU8sWUg3RGdCLENBQzFCLENBQ0VqSSxLQUFNLGtCQUNOQyxLQUFNLHNHQUVSLENBQ0VELEtBQU0sY0FDTkMsS0FBTSx5R0FFUixDQUNFRCxLQUFNLGlCQUNOQyxLQUFNLDRHQUVSLENBQ0VELEtBQU0sVUFDTkMsS0FBTSxxR0FFUixDQUNFRCxLQUFNLHdCQUNOQyxLQUFNLHFHQUVSLENBQ0VELEtBQU0saUJBQ05DLEtBQU0sb0dHd0NWLE1BQU1xSCxFQUF3QixJQUFJMUYsRUFDaEN5RixFQUNBQSxHQUVJTyxFQUF1QixJQUFJaEcsRUFDL0J5RixFQUNBQSxHQUdGTyxFQUFxQjNELG1CQUNyQnFELEVBQXNCckQsa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gICAgdGhpcy5fbGluayA9IGxpbms7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHJldHVybiBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FyZFRpdGxlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkVGl0bGVFbC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5kZWxldGVfX2J1dHRvblwiKTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiI1wiICsgaW5wdXRFbC5pZCArIFwiLWVycm9yXCJcbiAgICApO1xuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFbHMpKSB7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xuICAgIH1cbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIiNcIiArIGlucHV0RWwuaWQgKyBcIi1lcnJvclwiXG4gICAgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICB0aGlzLl9lcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgdGhpcy5fZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbHMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXG4gICAgKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKF9pbnB1dEVsKSA9PiB7XG4gICAgICBfaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKF9lKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShfaW5wdXRFbCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICBjb25zb2xlLmxvZyh0aGlzKTtcbiAgfVxuXG4gIGRpc2FibGVCdXR0b24oKSB7XG4gICAgaWYgKHRoaXMuX3N1Ym1pdEJ1dHRvbikge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgaWYgKHRoaXMuX3N1Ym1pdEJ1dHRvbikge1xuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcbiAgcG9wdXBGb3JtOiBcIm1vZGFsX19mb3JtXCIsXG4gIHByZXZpZXdJbWFnZTogXCJtb2RhbF9fcHJldmlldy1pbWFnZVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBjYXJkU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGFnZV9fc2VjdGlvblwiKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZHRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZHQtbW9kYWxcIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1tb2RhbFwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTW9kYWxDbG9zZUJ1dHRvbiA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjbW9kYWwtY2xvc2UtYnV0dG9ub25lXCJcbik7XG5leHBvcnQgY29uc3QgYWRkQ2FyZE1vZGFsQ2xvc2VCdXR0b24gPSBwcm9maWxlQWRkTW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIjbW9kYWwtY2xvc2UtYnV0dG9udHdvXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb25cIlxuKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTW9kYWxJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX25hbWVcIlxuKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTW9kYWxJbnB1dERlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2lucHV0X3R5cGVfZGVzY3JpcHRpb25cIlxuKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlTW9kYWxJbnB1dExpbmsgPVxuICBwcm9maWxlQWRkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXQtbGlua1wiKTtcbmV4cG9ydCBjb25zdCBzYXZlQnV0dG9uT3BlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc2F2ZS1idXR0b24tb3BlbmVkXCIpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVNb2RhbEZvcm0gPSBwcm9maWxlRWRpdE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG5leHBvcnQgY29uc3QgYWRkUHJvZmlsZU1vZGFsRm9ybSA9XG4gIHByb2ZpbGVBZGRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuZXhwb3J0IGNvbnN0IG1vZGFsUHJldmlld0ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1pbWFnZS1wcmV2aWV3XCIpO1xuZXhwb3J0IGNvbnN0IG1vZGFsSW1hZ2VQcmV2aWV3TGluayA9IG1vZGFsUHJldmlld0ltYWdlLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19wcmV2aWV3LWltYWdlXCJcbik7XG5leHBvcnQgY29uc3QgbW9kYWxQcmV2aWV3VGl0bGUgPSBtb2RhbFByZXZpZXdJbWFnZS5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9fdGl0bGUtcHJldmlld1wiXG4pO1xuXG5leHBvcnQgY29uc3QgY2FyZExpc3RFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpc3RcIik7XG5leHBvcnQgY29uc3QgY2FyZExpc3RTZWxlY3RvciA9IFwiLmNhcmRzX19saXN0XCI7XG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBwcmV2aWV3TW9kYWxDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI21vZGFsX19jbG9zZS1wcmV2aWV3XCJcbik7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGUpID0+IHtcbiAgICBpZiAoZS5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgYnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlXCIpO1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRzID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xuICAgIGNvbnN0IGlucHV0c0l0ZW1zID0ge307XG5cbiAgICBpbnB1dHMuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSB9KSA9PiB7XG4gICAgICBpbnB1dHNJdGVtc1tuYW1lXSA9IHZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiBpbnB1dHNJdGVtcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCAqIGFzIGNvbnN0YW50cyBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5cbmNvbnN0IGNhcmRQcmV2aWV3ID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI21vZGFsLWltYWdlLXByZXZpZXdcIik7XG5jYXJkUHJldmlldy5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKG5hbWUsIGxpbmspIHtcbiAgY2FyZFByZXZpZXcub3Blbih7IG5hbWUsIGxpbmsgfSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZERhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50LmdldFZpZXcoKTtcbn1cblxuY29uc3QgdXNlckluZm9ybWF0aW9uID0gbmV3IFVzZXJJbmZvKHtcbiAgbmFtZTogXCIjcHJvZmlsZS10aXRsZVwiLFxuICBkZXNjcmlwdGlvbjogXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiLFxufSk7XG5cbmNvbnN0IGVkaXRNb2RhbEZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShcIiNwcm9maWxlLWVkdC1tb2RhbFwiLCAoZGF0YSkgPT4ge1xuICB1c2VySW5mb3JtYXRpb24uc2V0VXNlckluZm8oe1xuICAgIG5hbWU6IGRhdGEudGl0bGUsXG4gICAgZGVzY3JpcHRpb246IGRhdGEuZGVzY3JpcHRpb24sXG4gIH0pO1xufSk7XG5lZGl0TW9kYWxGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5jb25zdGFudHMucHJvZmlsZUVkdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBlZGl0Q2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm9ybWF0aW9uLmdldFVzZXJJbmZvKCk7XG4gIGNvbnN0YW50cy5wcm9maWxlTW9kYWxJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLm5hbWU7XG4gIGNvbnN0YW50cy5wcm9maWxlTW9kYWxJbnB1dERlc2NyaXB0aW9uLnZhbHVlID0gdXNlckRhdGEuZGVzY3JpcHRpb24udHJpbSgpO1xuXG4gIGVkaXRNb2RhbEZvcm0ub3BlbigpO1xufSk7XG5cbmNvbnN0IG1vZGFsQWRkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI3Byb2ZpbGUtYWRkLW1vZGFsXCIsIChkYXRhKSA9PiB7XG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhKSk7XG59KTtcbm1vZGFsQWRkRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuY29uc3RhbnRzLnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgbW9kYWxBZGRGb3JtLm9wZW4oKTtcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xuICAgICAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbiAgfSxcbiAgY29uc3RhbnRzLmNhcmRMaXN0U2VsZWN0b3Jcbik7XG5cbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKGNvbnN0YW50cy5pbml0aWFsQ2FyZHMpO1xuXG5jb25zdCBlZGl0Q2FyZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgY29uc3RhbnRzLnNldHRpbmdzLFxuICBjb25zdGFudHMucHJvZmlsZU1vZGFsRm9ybVxuKTtcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIGNvbnN0YW50cy5zZXR0aW5ncyxcbiAgY29uc3RhbnRzLmFkZFByb2ZpbGVNb2RhbEZvcm1cbik7XG5cbmFkZENhcmRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmVkaXRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9fcHJldmlldy1pbWFnZVwiXG4gICAgKTtcbiAgICB0aGlzLl9pbWFnZVRpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5tb2RhbF9fdGl0bGUtcHJldmlld1wiXG4gICAgKTtcbiAgfVxuXG4gIG9wZW4oZGF0YSkge1xuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IGAubW9kYWxfX3ByZXZpZXctaW1hZ2UgJHtkYXRhLmxpbmt9YDtcbiAgICB0aGlzLl9pbWFnZVRpdGxlLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGRlc2NyaXB0aW9uIH0pIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lKTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVzY3JpcHRpb24pO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgY29uc3QgdXNlckluZm8gPSB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50LFxuICAgIH07XG4gICAgcmV0dXJuIHVzZXJJbmZvO1xuICB9XG5cbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLmRlc2NyaXB0aW9uO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcyhpdGVtcykge1xuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRJbWFnZUVsIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiZ2V0VmlldyIsIl9jYXJkVGl0bGVFbCIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJfZXJyb3JNZXNzYWdlRWwiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9pbnB1dEVscyIsImRpc2FibGVCdXR0b24iLCJfZW5hYmxlQnV0dG9uIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJldmVyeSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfc3VibWl0QnV0dG9uIiwiZm9yRWFjaCIsIl9pbnB1dEVsIiwiX2UiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwiY29uc29sZSIsImxvZyIsImRpc2FibGVkIiwiZm9ybVNlbGVjdG9yIiwicHJvZmlsZUVkdEJ0biIsInByb2ZpbGVFZGl0TW9kYWwiLCJwcm9maWxlQWRkTW9kYWwiLCJwcm9maWxlTW9kYWxJbnB1dCIsInByb2ZpbGVNb2RhbElucHV0RGVzY3JpcHRpb24iLCJwcm9maWxlTW9kYWxGb3JtIiwiYWRkUHJvZmlsZU1vZGFsRm9ybSIsIm1vZGFsUHJldmlld0ltYWdlIiwicHJvZmlsZUFkZEJ1dHRvbiIsImZpcnN0RWxlbWVudENoaWxkIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsInJlc2V0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRzIiwiaW5wdXRzSXRlbXMiLCJ2YWx1ZSIsImNhcmRQcmV2aWV3IiwiX2ltYWdlRWxlbWVudCIsIl9pbWFnZVRpdGxlIiwiZGF0YSIsImNyZWF0ZUNhcmQiLCJjYXJkRGF0YSIsInVzZXJJbmZvcm1hdGlvbiIsImRlc2NyaXB0aW9uIiwiX2Rlc2NyaXB0aW9uIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySW5mbyIsImVkaXRNb2RhbEZvcm0iLCJ0aXRsZSIsImNvbnN0YW50cyIsImVkaXRDYXJkRm9ybVZhbGlkYXRvciIsInVzZXJEYXRhIiwidHJpbSIsIm1vZGFsQWRkRm9ybSIsImNhcmRTZWN0aW9uIiwiYWRkSXRlbSIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJyZW5kZXJJdGVtcyIsIml0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZEVsZW1lbnQiXSwic291cmNlUm9vdCI6IiJ9